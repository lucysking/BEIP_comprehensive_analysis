"0","demo_lg <-"
"0","  demo_lg_preg %>% "
"0","  left_join(demo_lg_nb, by = ""ID"") %>% "
"0","  left_join(demo_lg_6mo, by = ""ID"") %>% "
"0","  left_join("
"0","    read_csv(dob_lg_file) %>% "
"0","      mutate(record_id = as.numeric(record_id)) %>% "
"0","      rename(ID = record_id),"
"0","    by = ""ID"""
"0","  ) %>% "
"0","  left_join("
"0","    read_csv(visit_date_lg_6mo_file) %>% "
"0","      mutate(record_id = as.numeric(record_id)) %>% "
"0","      rename(ID = record_id) %>% "
"0","      filter(ID >= 1000 & !is.na(ID)) %>% "
"0","      select(ID, crf_date),"
"0","    by = ""ID"""
"0","  ) %>% "
"0","  rename("
"0","    visit_date_t1 = date_t1,"
"0","    #newborn visit is scan only "
"0","    visit_date_t2 = date_t2,"
"0","    behav_visit_date_t3 = crf_date"
"0","  ) %>% "
"0","  left_join("
"0","    scan_age_6mo,"
"0","    by = ""ID"""
"0","  ) %>% "
"0","  rename("
"0","    due_date = baby_due_date"
"0","  ) %>% "
"0","  mutate("
"0","    due_date = parse_date(due_date, format = ""%m/%d/%y""),"
"0","    baby_dob = parse_date(baby_dob, format = ""%m/%d/%y""),"
"0","    mom_dob = parse_date(mom_dob, format = ""%m/%d/%y""),"
"0","    visit_date_t1 = parse_date(visit_date_t1, format = ""%m/%d/%y""),"
"0","    behav_visit_date_t3 = parse_date(behav_visit_date_t3, format = ""%m/%d/%y""),"
"0","    conception_date = due_date - weeks(40),"
"0","    gestational_weeks_t1 = (conception_date %--% visit_date_t1) / weeks(1),"
"0","    gestational_weeks_birth = (conception_date %--% baby_dob) / weeks(1),"
"0","    age_scan_t2 = (baby_dob %--% visit_date_t2) / months(1),"
"0","    age_scan_corr_t2 = (due_date %--% visit_date_t2) / months(1),"
"0","    age_behav_t3 = (baby_dob %--% behav_visit_date_t3) / months(1),"
"0","    mom_age_t1 = (mom_dob %--% visit_date_t1) / years(1),"
"0","    mom_age_t2 = (mom_dob %--% visit_date_t2) / years(1),"
"0","    mom_age_t3 = (mom_dob %--% behav_visit_date_t3) / years(1),"
"0","    male = case_when("
"0","      baby_sex_t2 == 1 | baby_sex_t3 == 1 ~ 0,"
"0","      baby_sex_t2 == 2 | baby_sex_t3 == 2 ~ 1"
"0","    ),"
"0","    baby_pob = case_when("
"0","      !is.na(baby_pob_t2) ~ baby_pob_t2,"
"0","      is.na(baby_pob_t2) & !is.na(baby_pob_t3) ~ baby_pob_t3,"
"0","      TRUE ~ NA_character_"
"0","    ),"
"0","    baby_ethnicity = case_when("
"0","      !is.na(baby_ethnicity_t2) ~ baby_ethnicity_t2,"
"0","      is.na(baby_ethnicity_t2) & !is.na(baby_ethnicity_t3) ~ baby_race_t3,"
"0","      TRUE ~ NA_real_"
"0","    ),"
"0","    baby_race = case_when("
"0","      !is.na(baby_race_t2) ~ baby_race_t2,"
"0","      is.na(baby_race_t2) & !is.na(baby_race_t3) ~ baby_race_t3,"
"0","      TRUE ~ NA_real_"
"0","    ),"
"0","    baby_race_describe = case_when("
"0","      !is.na(baby_race_describe_t2) ~ baby_race_describe_t2,"
"0","      is.na(baby_race_describe_t2) & !is.na(baby_race_describe_t3) ~ baby_race_describe_t3,"
"0","      TRUE ~ NA_character_"
"0","    ),"
"0","    mom_ethnicity = case_when("
"0","      !is.na(mom_ethnicity_t1) ~ mom_ethnicity_t1,"
"0","      is.na(mom_ethnicity_t1) & !is.na(mom_ethnicity_t2) ~ mom_ethnicity_t2,"
"0","      is.na(mom_ethnicity_t1) & is.na(mom_ethnicity_t2) ~ mom_ethnicity_t3,"
"0","      TRUE ~ NA_real_"
"0","    ),"
"0","    mom_race = case_when("
"0","      !is.na(mom_race_t1) ~ mom_race_t1,"
"0","      is.na(mom_race_t1) & !is.na(mom_race_t2) ~ mom_race_t2,"
"0","      is.na(mom_race_t1) & is.na(mom_race_t2) ~ mom_race_t3,"
"0","      TRUE ~ NA_real_"
"0","    ),"
"0","    mom_race_describe = case_when("
"0","      !is.na(momrace_describe_t1) ~ momrace_describe_t1,"
"0","      is.na(momrace_describe_t1) & !is.na(momrace_describe_t2) ~ momrace_describe_t2,"
"0","      is.na(momrace_describe_t1) & is.na(momrace_describe_t2) ~ momrace_describe_t3,"
"0","      TRUE ~ NA_character_"
"0","    )"
"0","  ) %>% "
"0","  select("
"0","    -c("
"0","      baby_sex_t2, "
"0","      baby_sex_t3,"
"0","      baby_race_t2,"
"0","      baby_race_t3,"
"0","      baby_race_describe_t2,"
"0","      baby_race_describe_t3,"
"0","      baby_ethnicity_t2,"
"0","      baby_ethnicity_t3,"
"0","      mom_ethnicity_t1,"
"0","      mom_ethnicity_t2,"
"0","      mom_ethnicity_t3,"
"0","      mom_race_t1,"
"0","      mom_race_t2,"
"0","      mom_race_t3,"
"0","      momrace_describe_t1,"
"0","      momrace_describe_t2,"
"0","      momrace_describe_t3"
"0","    )"
"0","  ) %>% "
"0","  rename("
"0","    mom_latinx = mom_ethnicity,"
"0","    baby_latinx = baby_ethnicity,"
"0","    in_home_partner_t1 = ppl_in_home___1_t1,"
"0","    in_home_partner_t2 = ppl_in_home___1_t2,"
"0","    in_home_partner_t3 = ppl_in_home___1_t3,"
"0","    in_home_infant_t1 = ppl_in_home___2_t1,"
"0","    in_home_infant_t2 = ppl_in_home___2_t2,"
"0","    in_home_infant_t3 = ppl_in_home___2_t3,"
"0","    in_home_preschool_t1 = ppl_in_home___3_t1,"
"0","    in_home_preschool_t2 = ppl_in_home___3_t2,"
"0","    in_home_preschool_t3 = ppl_in_home___3_t3,"
"0","    in_home_olderchild_t1 = ppl_in_home___4_t1,"
"0","    in_home_olderchild_t2 = ppl_in_home___4_t2,"
"0","    in_home_olderchild_t3 = ppl_in_home___4_t3,"
"0","    in_home_maternal_grandmom_t1 = ppl_in_home___5_t1,"
"0","    in_home_maternal_grandmom_t2 = ppl_in_home___5_t2,"
"0","    in_home_maternal_grandmom_t3 = ppl_in_home___5_t3,"
"0","    in_home_maternal_granddad_t1 = ppl_in_home___6_t1,"
"0","    in_home_maternal_granddad_t2 = ppl_in_home___6_t2,"
"0","    in_home_maternal_granddad_t3 = ppl_in_home___6_t3,"
"0","    in_home_paternal_grandpar_t1 = ppl_in_home___7_t1,"
"0","    in_home_paternal_grandpar_t2 = ppl_in_home___7_t2,"
"0","    in_home_paternal_grandpar_t3 = ppl_in_home___7_t3,"
"0","    in_home_friend_t1 = ppl_in_home___8_t1,"
"0","    in_home_friend_t2 = ppl_in_home___8_t2,"
"0","    in_home_friend_t3 = ppl_in_home___8_t3,"
"0","    in_home_otherfam_t1 = ppl_in_home___9_t1,"
"0","    in_home_otherfam_t2 = ppl_in_home___9_t2,"
"0","    in_home_otherfam_t3 = ppl_in_home___9_t3,"
"0","    live_alone_t1 = ppl_in_home___10_t1,"
"0","    live_alone_t2 = ppl_in_home___10_t2,"
"0","    live_alone_t3 = ppl_in_home___10_t3,"
"0","    in_home_other_t1 = ppl_in_home___11_t1,"
"0","    in_home_other_t2 = ppl_in_home___11_t2,"
"0","    in_home_other_t3 = ppl_in_home___11_t3,"
"0","    ppl_in_home_allinfants_t1 = ppl_in_home_infants_t1,"
"0","    ppl_in_home_allinfants_t2 = ppl_in_home_infants_t2,"
"0","    ppl_in_home_allinfants_t3 = ppl_in_home_infants_t3,"
"0","    ppl_in_home_allpreschool_t1 = ppl_in_home_preschool_t1,"
"0","    ppl_in_home_allpreschool_t2 = ppl_in_home_preschool_t2,"
"0","    ppl_in_home_allpreschool_t3 = ppl_in_home_preschool_t3,"
"0","    ppl_in_home_allolderchild_t1 = ppl_in_home_schoolage_t1,"
"0","    ppl_in_home_allolderchild_t2 = ppl_in_home_schoolage_t2,"
"0","    ppl_in_home_allolderchild_t3 = ppl_in_home_schoolage_t3"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars("
"0","      ppl_in_home_allinfants_t1, "
"0","      ppl_in_home_allinfants_t2,"
"0","      ppl_in_home_allinfants_t3,"
"0","      ppl_in_home_allpreschool_t1, "
"0","      ppl_in_home_allpreschool_t2, "
"0","      ppl_in_home_allpreschool_t3, "
"0","      ppl_in_home_allolderchild_t1,"
"0","      ppl_in_home_allolderchild_t2,"
"0","      ppl_in_home_allolderchild_t3,"
"0","      ppl_in_home_adults_t1,"
"0","      ppl_in_home_adults_t2,"
"0","      ppl_in_home_adults_t3,"
"0","      ppl_in_home_allchild_t1,"
"0","      ppl_in_home_allchild_t2,"
"0","      ppl_in_home_allchild_t3"
"0","    ),"
"0","    as.double"
"0","  )  %>% "
"0","  mutate("
"0","    mom_race = factor("
"0","      mom_race, "
"0","      levels = c(1, 2, 3, 4, 5, 6),"
"0","      labels = c("
"0","        ""American Indian/Alaska Native"","
"0","        ""Asian"","
"0","        ""Black/African American"","
"0","        ""Native Hawaiian/Other Pacific Islander"","
"0","        ""White"","
"0","        ""Other"""
"0","      )"
"0","    ),"
"0","    baby_race = factor("
"0","      baby_race,"
"0","      levels = c(1, 2, 3, 4, 5, 6, 7),"
"0","      labels = c("
"0","        ""American Indian/Alaska Native"","
"0","        ""Asian"","
"0","        ""Black/African American"","
"0","        ""Prefer not to answer"","
"0","        ""Native Hawaiian/Other Pacific Islander"","
"0","        ""White"","
"0","        ""Other"""
"0","      )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(education_t1, education_t2, education_t3),"
"0","    funs("
"0","      . %>% "
"0","        recode("
"0","          ""0"" = ""0"","
"0","          ""2"" = ""1"","
"0","          ""3"" = ""2"","
"0","          ""4"" = ""3"","
"0","          ""5"" = ""4"","
"0","          ""6"" = ""5"","
"0","          ""7"" = ""6"","
"0","          ""8"" = ""7"","
"0","          ""9"" = ""8"","
"0","          ""10"" = ""9"""
"0","        )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(education_t1, education_t2, education_t3),"
"0","    funs("
"0","      ""txt"" = factor("
"0","             .,"
"0","             levels = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9),"
"0","             labels = c("
"0","               ""No schooling completed"","
"0","               ""Nursery school-8th grade"","
"0","               ""Some high school, no diploma"","
"0","               ""High school graduate/diploma/equivalent (i.e. GED)"","
"0","               ""Some college credit, no degree"","
"0","               ""Trade/technical/vocational training"","
"0","               ""Associate degree"","
"0","               ""Bachelor's degree"","
"0","               ""Graduate degree"","
"0","               ""Other"""
"0","             )"
"0","           )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(employment_status_t1, employment_status_t2, employment_status_t3),"
"0","    funs("
"0","      ""txt"" = factor("
"0","        .,"
"0","        levels = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10),"
"0","        labels = c("
"0","          ""Employed for wages"","
"0","          ""Self-employed"","
"0","          ""Out of work, looking for work"","
"0","          ""Out of work, not looking for work"","
"0","          ""Homemaker"","
"0","          ""Student"","
"0","          ""Military"","
"0","          ""Retired"","
"0","          ""Unable to work"","
"0","          ""Other"""
"0","        )"
"0","      )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(marital_status_t1, marital_status_t2, marital_status_t3),"
"0","    funs("
"0","      ""txt"" =  factor("
"0","        ., "
"0","        levels = c(1, 2, 3, 4, 5, 6),"
"0","        labels = c("
"0","          ""Single, never married"","
"0","          ""Married/domestic partnership"","
"0","          ""Widowed"","
"0","          ""Divorced"","
"0","          ""Separated"","
"0","          ""Other"""
"0","        )"
"0","      )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(partner_educ_t1, partner_educ_t2, partner_educ_t3),"
"0","    funs("
"0","      . %>% "
"0","        recode("
"0","          ""0"" = ""0"","
"0","          ""2"" = ""1"","
"0","          ""3"" = ""2"","
"0","          ""4"" = ""3"","
"0","          ""5"" = ""4"","
"0","          ""6"" = ""5"","
"0","          ""7"" = ""6"","
"0","          ""8"" = ""7"","
"0","          ""9"" = ""8"","
"0","          ""10"" = ""9"""
"0","        )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(partner_educ_t1, partner_educ_t2, partner_educ_t3),"
"0","    funs("
"0","      ""txt"" = factor("
"0","        .,"
"0","        levels = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9),"
"0","        labels = c("
"0","          ""No schooling completed"","
"0","          ""Nursery school-8th grade"","
"0","          ""Some high school, no diploma"","
"0","          ""High school graduate/diploma/equivalent (i.e. GED)"","
"0","          ""Some college credit, no degree"","
"0","          ""Trade/technical/vocational training"","
"0","          ""Associate degree"","
"0","          ""Bachelor's degree"","
"0","          ""Graduate degree"","
"0","          ""Other"""
"0","        )"
"0","      )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(partner_employ_t1, partner_employ_t2, partner_employ_t3),"
"0","    funs("
"0","      ""txt"" = factor("
"0","        .,"
"0","        levels = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10),"
"0","        labels = c("
"0","          ""Employed for wages"","
"0","          ""Self-employed"","
"0","          ""Out of work, looking for work"","
"0","          ""Out of work, not looking for work"","
"0","          ""Homemaker"","
"0","          ""Student"","
"0","          ""Military"","
"0","          ""Retired"","
"0","          ""Unable to work"","
"0","          ""Other"""
"0","        )"
"0","      )"
"0","    )"
"0","  ) %>% "
"0","  mutate_at("
"0","    vars(annual_income_t1, annual_income_t2, annual_income_t3),"
"0","    funs("
"0","      ""txt"" = factor("
"0","        .,"
"0","        levels = c(1, 2, 3, 4, 5, 6, 7),"
"0","        labels = c("
"0","          ""$0-5,000"","
"0","          ""$5,001-15,000"","
"0","          ""$15,001-30,000"","
"0","          ""30,001-60,000"","
"0","          ""60,001-90,000"","
"0","          ""90,001-150,000"","
"0","          "">$150,000"""
"0","        )"
"0","      )"
"0","    )"
"0","  ) %>% "
"0","  group_by(ID) %>% "
"0","  mutate("
"0","    ppl_in_home_tot_t1 = ppl_in_home_adults_t1 + ppl_in_home_allchild_t1,"
"0","    ppl_in_home_tot_t2 = ppl_in_home_adults_t1 + ppl_in_home_allchild_t2,"
"0","    ppl_in_home_tot_t3 = ppl_in_home_adults_t1 + ppl_in_home_allchild_t3"
"0","  ) %>% "
"0","  ungroup() %>% "
"0","  mutate_at("
"0","    vars(annual_income_t1, annual_income_t2, annual_income_t3),"
"0","    funs("
"0","      ""num"" ="
"0","        . %>% "
"0","        recode("
"0","        ""1"" = 2500,"
"0","        ""2"" = 10000,"
"0","        ""3"" = 22500,"
"0","        ""4"" = 45000,"
"0","        ""5"" = 75000,"
"0","        ""6"" = 120000,"
"0","        ""7"" = 150000"
"0","        )"
"0","    )"
"0","  ) %>% "
"0","  #santa clara country low-income limit : 80% of median income (ratios <= 1 are therefore ""low income"")"
"0","  #https://www.huduser.gov/portal/datasets/il/il2017/2017summary.odn"
"0","  mutate_at("
"0","    vars(ppl_in_home_tot_t1, ppl_in_home_tot_t2, ppl_in_home_tot_t3),"
"0","    funs("
"0","      ""SClimit"" = "
"0","        . %>% "
"0","        recode("
"0","        ""1"" = 59350,"
"0","        ""2"" = 67800,"
"0","        ""3"" = 76300, "
"0","        ""4"" = 84750,"
"0","        ""5"" = 91500,"
"0","        ""6"" = 98350,"
"0","        ""7"" = 105100,"
"0","        ""8"" = 111900,"
"0","        # anything > 8 is set at the same value"
"0","        .default = 111900"
"0","      )"
"0","    )"
"0","  ) %>% "
"0","  group_by(ID) %>% "
"0","  mutate("
"0","    income_needs_t1 = annual_income_t1_num / ppl_in_home_tot_t1_SClimit,"
"0","    income_needs_t2 = annual_income_t2_num / ppl_in_home_tot_t2_SClimit,"
"0","    income_needs_t3 = annual_income_t3_num / ppl_in_home_tot_t3_SClimit"
"0","  ) %>% "
"0","  ungroup() %>% "
"0","  select("
"0","    -partner_in_home_t1,"
"0","    -partner_in_home_t2,"
"0","    -partner_in_home_t3,"
"0","    -mom_dob, "
"0","    -baby_dob"
"0","  ) "
"2","Parsed with column specification:
cols(
  record_id = [31mcol_character()[39m,
  mom_dob = [31mcol_character()[39m,
  baby_due_date = [31mcol_character()[39m,
  baby_dob = [31mcol_character()[39m
)
"
"2","NAs introduced by coercion"
"2","Parsed with column specification:
cols(
  .default = col_character(),
  record_id = [32mcol_double()[39m,
  redcap_survey_identifier = [33mcol_logical()[39m,
  crf_sleepquality = [32mcol_double()[39m,
  crf_babymeds = [32mcol_double()[39m,
  crf_babysick = [32mcol_double()[39m,
  mom_med = [32mcol_double()[39m,
  mom_height_ft = [32mcol_double()[39m,
  mom_height_inch = [32mcol_double()[39m,
  mom_weight_lb = [32mcol_double()[39m,
  saliva6_time = [33mcol_logical()[39m,
  saliva6_notes = [33mcol_logical()[39m,
  freeplay_cond = [32mcol_double()[39m,
  case_report_form_complete = [32mcol_double()[39m
)
"
"2","See spec(...) for full column specifications.
"
"2"," 40 failed to parse."
"2"," 40 failed to parse."
"2"," 40 failed to parse."
"0","write_csv("
"0","  demo_lg, "
"0","  ""~/Box/Mooddata_Coordinating/BABIES/Data/demographics_data/demo_longitudinal_cleaned_20200108.csv"""
"0",")"
